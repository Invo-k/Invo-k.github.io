<!DOCTYPE html>
<html lang="es">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <meta charset="UTF-8">
  <title>Detektiv</title>

  <!-- Conectar CSS -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="InitialPage">

    <h1>DETEKTIV</h1>

    <p>
      Los primeros pasos para volverse un Gran Detective.
    </p>

    <a href="LittleDetektiv" class="link_yellow">
      Little Detektiv
    </a>
    
    <img alt="Shaila and R Playing" src="/assets/images/start_point.jpg" class="zoom">

  </div>

   <!-- Lightbox -->
  <div id="lightbox">
    <span id="close-lightbox">&times;</span>
    <img id="lightbox-img" src="" alt="Imagen ampliada">
  </div>
  
<script>
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  const closeBtn = document.getElementById('close-lightbox');

  const zoomImages = document.querySelectorAll('.zoom');

  zoomImages.forEach(img => {
    img.addEventListener('click', () => {
      lightboxImg.src = img.src;
      lightbox.classList.add('active');
    });
  });

  closeBtn.addEventListener('click', closeLightbox);


  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) {
      closeLightbox();
    }
  });

  
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && lightbox.classList.contains('active')) {
      closeLightbox();
    }
  });


  let magnifierActive = false;

  lightboxImg.addEventListener('click', (e) => {
  magnifierActive = !magnifierActive;

  if (magnifierActive) {
    lightboxImg.classList.add('zoomed');
  } else {
    lightboxImg.classList.remove('zoomed');
    lightboxImg.style.transformOrigin = 'center center';
  }

  e.stopPropagation(); // evita cerrar el lightbox
});

  lightboxImg.addEventListener('mousemove', (e) => {
  if (!magnifierActive) return;

  const rect = lightboxImg.getBoundingClientRect();
  const x = ((e.clientX - rect.left) / rect.width) * 100;
  const y = ((e.clientY - rect.top) / rect.height) * 100;

  lightboxImg.style.transformOrigin = `${x}% ${y}%`;
});

  function closeLightbox() {
  lightbox.classList.remove('active');
  magnifierActive = false;
  lightboxImg.classList.remove('zoomed');
  lightboxImg.style.transformOrigin = 'center center';
}

  
</script>


</body>
</html>
